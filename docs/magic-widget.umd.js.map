{"version":3,"file":"magic-widget.umd.js","sources":["../node_modules/react-dom/client.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js","../src/magic-widget/components/ProductGrid.jsx","../src/magic-widget/components/ChatInterface.jsx","../src/magic-widget/components/FilterPanel.jsx","../src/magic-widget/components/ParameterDisplay.jsx","../src/magic-widget/components/DebugPanel.jsx","../src/magic-widget/components/WidgetHeader.jsx","../src/magic-widget/services/MagicAPIClient.js","../src/magic-widget/hooks/useMagicWidget.js","../src/magic-widget/hooks/useStreamingChat.js","../src/magic-widget/MagicWidget.jsx","../src/index.umd.js"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import React from 'react';\n\nconst ProductGrid = ({ products, loading, isMiniView }) => {\n  // Loading state\n  if (loading && (!products || products.length === 0)) {\n    return (\n      <div className=\"products-section\">\n        <div className=\"products-grid\">\n          <div className=\"loading-message\">Loading products...</div>\n        </div>\n      </div>\n    );\n  }\n\n  // No products state\n  if (!products || products.length === 0) {\n    return (\n      <div className=\"products-section\">\n        <div className=\"products-grid\">\n          <div className=\"no-products-message\">No products found</div>\n        </div>\n      </div>\n    );\n  }\n\n  // Helper functions for product data extraction\n  const getProductEffects = (product) => {\n    if (product.attributes?.effects) {\n      return Array.isArray(product.attributes.effects) \n        ? product.attributes.effects[0] || 'Various'\n        : product.attributes.effects || 'Various';\n    }\n    return 'Various';\n  };\n\n  const extractNumber = (value) => {\n    if (!value) return 0;\n    const numStr = String(value).replace(/[^\\d.]/g, '');\n    return parseFloat(numStr) || 0;\n  };\n\n  const getProductTHC = (product) => {\n    if (product.attributes) {\n      const thc = extractNumber(product.attributes.thc_content || product.attributes.thc);\n      const thca = extractNumber(product.attributes.thca_content || product.attributes.thca);\n      \n      let nestedThc = 0;\n      let nestedThca = 0;\n      if (product.attributes.cannabinoids) {\n        nestedThc = extractNumber(product.attributes.cannabinoids.THC);\n        nestedThca = extractNumber(product.attributes.cannabinoids.THCa || product.attributes.cannabinoids.THCA);\n      }\n      \n      return Math.max(thc, thca, nestedThc, nestedThca).toFixed(1);\n    }\n    return '0';\n  };\n\n  const getProductCBD = (product) => {\n    if (product.attributes) {\n      const cbd = extractNumber(product.attributes.cbd_content || product.attributes.cbd);\n      const cbda = extractNumber(product.attributes.cbda_content || product.attributes.cbda);\n      \n      let nestedCbd = 0;\n      let nestedCbda = 0;\n      if (product.attributes.cannabinoids) {\n        nestedCbd = extractNumber(product.attributes.cannabinoids.CBD);\n        nestedCbda = extractNumber(product.attributes.cannabinoids.CBDa || product.attributes.cannabinoids.CBDA);\n      }\n      \n      return Math.max(cbd, cbda, nestedCbd, nestedCbda).toFixed(1);\n    }\n    return '0';\n  };\n\n  const getProductUnit = (product) => {\n    const category = product.category;\n    if (['Drinks', 'Edibles', 'Tinctures', 'Topicals'].includes(category)) {\n      return 'mg';\n    }\n    return '%';\n  };\n\n  const handleProductClick = (product) => {\n    if (isMiniView) return; // Disable clicks in mini view\n    \n    const url = product.url || '#';\n    if (url !== '#') {\n      window.open(url, '_blank');\n    }\n  };\n\n  return (\n    <div className=\"products-section\">\n      <div className={`products-grid ${loading ? 'loading' : ''}`}>\n        {products.map((product, index) => (\n          <div\n            key={product.id || index}\n            className={`product-card ${isMiniView ? 'mini-view' : ''}`}\n            onClick={() => handleProductClick(product)}\n            style={{\n              cursor: isMiniView ? 'default' : 'pointer',\n              pointerEvents: isMiniView ? 'none' : 'auto'\n            }}\n          >\n            {/* Product Image */}\n            <div className=\"product-image-container\">\n              {product.image_url ? (\n                <img\n                  src={product.image_url}\n                  alt={product.name || 'Cannabis Product'}\n                  className=\"product-image\"\n                  onError={(e) => {\n                    e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjZjBmMGYwIi8+Cjx0ZXh0IHg9IjIwIiB5PSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIyMCIgZmlsbD0iIzk5OTk5OSI+8J+MvzwvdGV4dD4KPHN2Zz4K';\n                  }}\n                />\n              ) : (\n                <div className=\"product-image-placeholder\">üåø</div>\n              )}\n            </div>\n\n            {/* Product Info */}\n            <div className=\"product-info\">\n              <div className=\"product-name\">\n                {product.name || 'Product'}\n              </div>\n              \n              {!isMiniView && (\n                <>\n                  <div className=\"product-details\">\n                    {product.category || 'Cannabis'} ‚Ä¢ {getProductEffects(product)}\n                  </div>\n                  <div className=\"product-details\">\n                    THC: {getProductTHC(product)}{getProductUnit(product)}\n                  </div>\n                  <div className=\"product-details\">\n                    CBD: {getProductCBD(product)}{getProductUnit(product)}\n                  </div>\n                </>\n              )}\n              \n              <div className=\"product-price\">\n                ${product.price || '0'}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductGrid;\n","import React, { useState, useRef, useEffect } from 'react';\n\nconst ChatInterface = ({ \n  messages, \n  onSendMessage, \n  streaming, \n  progress, \n  disabled \n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, progress]);\n\n  // Focus input when not disabled\n  useEffect(() => {\n    if (!disabled && !streaming) {\n      inputRef.current?.focus();\n    }\n  }, [disabled, streaming]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    const message = inputValue.trim();\n    if (!message || streaming || disabled) return;\n    \n    setInputValue(''); // Clear input immediately for better UX\n    await onSendMessage(message);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  // Format message content with markdown-like parsing\n  const formatMessage = (content) => {\n    if (!content) return '';\n    \n    // Convert markdown-style formatting to HTML\n    let formatted = content\n      // Bold text: **text** ‚Üí <strong>text</strong>\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n      \n      // Main bullet points: ‚Ä¢ text ‚Üí <li>text</li>\n      .replace(/^‚Ä¢ (.*$)/gm, '<li>$1</li>')\n      \n      // Indented sub-bullets: - text ‚Üí <li class=\"sub\">text</li>\n      .replace(/^- (.*$)/gm, '<li class=\"sub\">$1</li>')\n      \n      // Spaced sub-bullets:   ‚Ä¢ text ‚Üí <li class=\"sub\">text</li>\n      .replace(/^  ‚Ä¢ (.*$)/gm, '<li class=\"sub\">$1</li>')\n      \n      // Line breaks to HTML breaks\n      .replace(/\\n/g, '<br>');\n\n    // Handle nested list structure\n    formatted = createNestedLists(formatted);\n    \n    // Convert double breaks to paragraph breaks\n    formatted = formatted\n      .replace(/<br><br>/g, '</p><p>')\n      .replace(/^(.*)$/s, function(match) {\n        if (match.includes('</p><p>')) {\n          return '<p>' + match + '</p>';\n        }\n        return match;\n      });\n\n    return formatted;\n  };\n\n  const createNestedLists = (text) => {\n    const lines = text.split('<br>');\n    let result = [];\n    let inList = false;\n    let inSubList = false;\n    \n    for (let line of lines) {\n      if (line.includes('<li>') && !line.includes('class=\"sub\"')) {\n        // Main bullet point\n        if (inSubList) {\n          result.push('</ul>');\n          inSubList = false;\n        }\n        if (!inList) {\n          result.push('<ul>');\n          inList = true;\n        }\n        result.push(line);\n      } else if (line.includes('<li class=\"sub\">')) {\n        // Sub bullet point\n        if (!inSubList) {\n          result.push('<ul>');\n          inSubList = true;\n        }\n        result.push(line.replace(' class=\"sub\"', ''));\n      } else {\n        // Regular text\n        if (inSubList) {\n          result.push('</ul>');\n          inSubList = false;\n        }\n        if (inList) {\n          result.push('</ul>');\n          inList = false;\n        }\n        if (line.trim()) {\n          result.push(line);\n        }\n      }\n    }\n    \n    // Close any open lists\n    if (inSubList) {\n      result.push('</ul>');\n    }\n    if (inList) {\n      result.push('</ul>');\n    }\n    \n    return result.join('');\n  };\n\n  return (\n    <div className=\"chat-section\">\n      <div className=\"section-title\">üí¨ Chat with Budtender</div>\n      \n      {/* Messages Container */}\n      <div className=\"chat-messages\">\n        {messages.map((message) => (\n          <div\n            key={message.id}\n            className={`chat-message ${message.role} ${message.isFilterResponse ? 'filter-response' : ''}`}\n          >\n            {message.isFilterResponse && (\n              <span className=\"filter-response-icon\" title=\"Auto-generated response based on filter update\">\n                üéõÔ∏è\n              </span>\n            )}\n            <div\n              className=\"message-content\"\n              dangerouslySetInnerHTML={{\n                __html: formatMessage(message.content)\n              }}\n            />\n            {message.timestamp && (\n              <div className=\"message-timestamp\">\n                {new Date(message.timestamp).toLocaleTimeString()}\n              </div>\n            )}\n          </div>\n        ))}\n        \n        {/* Progress Message */}\n        {progress && (\n          <div className=\"progress-message\">\n            <span className=\"progress-icon\">{progress.icon}</span>\n            <span className=\"progress-text\">{progress.message}</span>\n            {progress.typing && (\n              <span className=\"typing-dots\">\n                <span></span>\n                <span></span>\n                <span></span>\n              </span>\n            )}\n          </div>\n        )}\n        \n        {/* Auto-scroll anchor */}\n        <div ref={messagesEndRef} />\n      </div>\n      \n      {/* Input Container */}\n      <form \n        onSubmit={handleSubmit}\n        className={`chat-input-container ${(streaming || disabled) ? 'disabled' : ''}`}\n      >\n        <input\n          ref={inputRef}\n          type=\"text\"\n          className=\"chat-input\"\n          placeholder={\n            streaming \n              ? \"AI is responding...\" \n              : disabled \n                ? \"Please wait...\" \n                : \"Ask me anything...\"\n          }\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onKeyPress={handleKeyPress}\n          disabled={streaming || disabled}\n        />\n        <button\n          type=\"submit\"\n          className=\"chat-send-btn\"\n          disabled={streaming || disabled || !inputValue.trim()}\n        >\n          {streaming ? '...' : 'Send'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatInterface;\n","import React, { useState, useEffect, useCallback } from 'react';\n\nconst FilterPanel = ({ \n  filters, \n  categoryStats, \n  loading, \n  onFilterChange \n}) => {\n  // Local state for immediate UI feedback\n  const [localFilters, setLocalFilters] = useState(filters);\n  const [syncingFilters, setSyncingFilters] = useState(new Set());\n\n  // Update local filters when props change (from chat sync)\n  useEffect(() => {\n    setLocalFilters(filters);\n  }, [filters]);\n\n  // Debounced filter change handler\n  const debouncedChange = useCallback(\n    debounce((newFilters) => {\n      onFilterChange(newFilters, true);\n    }, 500),\n    [onFilterChange]\n  );\n\n  // Handle filter change with visual sync indicator\n  const handleFilterChange = useCallback((filterKey, value, immediate = false) => {\n    const newFilters = { ...localFilters, [filterKey]: value };\n    setLocalFilters(newFilters);\n\n    if (immediate) {\n      // Immediate update (e.g., category change)\n      onFilterChange(newFilters, true);\n      \n      // Show sync indicator\n      setSyncingFilters(prev => new Set(prev).add(filterKey));\n      setTimeout(() => {\n        setSyncingFilters(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(filterKey);\n          return newSet;\n        });\n      }, 1000);\n    } else {\n      // Debounced update (e.g., slider changes)\n      debouncedChange(newFilters);\n    }\n  }, [localFilters, onFilterChange, debouncedChange]);\n\n  // Category change handler - triggers immediate filter visibility changes\n  const handleCategoryChange = useCallback((category) => {\n    handleFilterChange('category', category, true);\n  }, [handleFilterChange]);\n\n  // Calculate single value display (no more ¬±20% ranges)\n  const calculateSingleValueDisplay = useCallback((value, unit = '') => {\n    if (!value || value <= 0) return `0${unit}`;\n    return `${Math.round(value)}${unit}`;\n  }, []);\n\n  // Get category stats for current selection\n  const getCurrentCategoryStats = useCallback(() => {\n    return categoryStats[localFilters.category] || {};\n  }, [categoryStats, localFilters.category]);\n\n  // Determine if filter groups should be visible\n  const showPriceFilter = localFilters.category;\n  const showEffectsFilter = localFilters.category;\n  const showTHCFilter = localFilters.category && localFilters.category !== 'Accessories';\n  const showCBDFilter = localFilters.category === 'Tinctures';\n\n  // Get potency unit based on category\n  const getPotencyUnit = useCallback((category) => {\n    if (['Drinks', 'Edibles', 'Tinctures', 'Topicals'].includes(category)) {\n      return 'mg';\n    }\n    return '%';\n  }, []);\n\n  return (\n    <div className=\"filters-section\">\n      <div className=\"section-title\">\n        üéØ Smart Filters\n        {(loading || syncingFilters.size > 0) && (\n          <span className=\"sync-indicator\"></span>\n        )}\n      </div>\n      \n      <div className=\"filter-rows\">\n        {/* Row 1: Category and Effects */}\n        <div className=\"filter-row\">\n          {/* Category Filter - Always visible */}\n          <div className={`filter-group ${syncingFilters.has('category') ? 'syncing' : ''}`}>\n            <label className=\"filter-label\">Category</label>\n            <select\n              className=\"filter-select\"\n              value={localFilters.category || ''}\n              onChange={(e) => handleCategoryChange(e.target.value)}\n              disabled={loading}\n            >\n              <option value=\"\">Select Category...</option>\n              <option value=\"Flower\">Flower</option>\n              <option value=\"Vapes\">Vapes</option>\n              <option value=\"Pre-Rolls\">Pre-Rolls</option>\n              <option value=\"Infused Pre-Rolls\">Infused Pre-Rolls</option>\n              <option value=\"Edibles\">Edibles</option>\n              <option value=\"Drinks\">Drinks</option>\n              <option value=\"Concentrates\">Concentrates</option>\n              <option value=\"Tinctures\">Tinctures</option>\n              <option value=\"Topicals\">Topicals</option>\n              <option value=\"Accessories\">Accessories</option>\n            </select>\n          </div>\n\n          {/* Effects Filter - Visible when category is selected */}\n          {showEffectsFilter && (\n            <div className={`filter-group ${syncingFilters.has('effects') ? 'syncing' : ''}`}>\n              <label className=\"filter-label\">Effects</label>\n              <select\n                className=\"filter-select\"\n                value={localFilters.effects || ''}\n                onChange={(e) => handleFilterChange('effects', e.target.value)}\n                disabled={loading}\n              >\n                <option value=\"\">Any Effects</option>\n                <option value=\"body relief\">Body Relief</option>\n                <option value=\"creative\">Creative</option>\n                <option value=\"energetic\">Energetic</option>\n                <option value=\"euphoric\">Euphoric</option>\n                <option value=\"focused\">Focused</option>\n                <option value=\"relaxing\">Relaxing</option>\n                <option value=\"sedating\">Sedating</option>\n                <option value=\"sleep\">Sleep</option>\n              </select>\n            </div>\n          )}\n        </div>\n\n        {/* Row 2: Range Filters */}\n        <div className=\"filter-row\">\n          {/* Price Filter - Midpoint ¬±20% */}\n          {showPriceFilter && (\n            <div className={`filter-group range-filter ${syncingFilters.has('price') ? 'syncing' : ''}`}>\n              <label className=\"filter-label\">Price (Around)</label>\n              <input\n                type=\"range\"\n                className=\"filter-range\"\n                min={getCurrentCategoryStats().price_stats?.min || 10}\n                max={getCurrentCategoryStats().price_stats?.max || 200}\n                value={localFilters.price || getCurrentCategoryStats().price_stats?.avg || 60}\n                onChange={(e) => handleFilterChange('price', parseFloat(e.target.value))}\n                disabled={loading}\n              />\n              <span className=\"range-display\">\n                ${calculateSingleValueDisplay(localFilters.price || getCurrentCategoryStats().price_stats?.avg || 60)}\n              </span>\n            </div>\n          )}\n\n          {/* THC Filter - Midpoint ¬±20% */}\n          {showTHCFilter && (\n            <div className={`filter-group range-filter ${syncingFilters.has('thc') ? 'syncing' : ''}`}>\n              <label className=\"filter-label\">\n                THC Potency ({getPotencyUnit(localFilters.category)})\n              </label>\n              <input\n                type=\"range\"\n                className=\"filter-range\"\n                min={getCurrentCategoryStats().thc_potency_stats?.min || 0}\n                max={getCurrentCategoryStats().thc_potency_stats?.max || 100}\n                value={localFilters.thc || getCurrentCategoryStats().thc_potency_stats?.avg || 20}\n                onChange={(e) => handleFilterChange('thc', parseFloat(e.target.value))}\n                disabled={loading}\n              />\n              <span className=\"range-display\">\n                {calculateSingleValueDisplay(\n                  localFilters.thc || getCurrentCategoryStats().thc_potency_stats?.avg || 20,\n                  getPotencyUnit(localFilters.category)\n                )}\n              </span>\n            </div>\n          )}\n\n          {/* CBD Filter - Midpoint ¬±20% (Tinctures only) */}\n          {showCBDFilter && (\n            <div className={`filter-group range-filter ${syncingFilters.has('cbd') ? 'syncing' : ''}`}>\n              <label className=\"filter-label\">CBD Potency (mg)</label>\n              <input\n                type=\"range\"\n                className=\"filter-range\"\n                min={getCurrentCategoryStats().cbd_potency_stats?.min || 0}\n                max={getCurrentCategoryStats().cbd_potency_stats?.max || 100}\n                value={localFilters.cbd || getCurrentCategoryStats().cbd_potency_stats?.avg || 10}\n                onChange={(e) => handleFilterChange('cbd', parseFloat(e.target.value))}\n                disabled={loading}\n              />\n              <span className=\"range-display\">\n                {calculateSingleValueDisplay(\n                  localFilters.cbd || getCurrentCategoryStats().cbd_potency_stats?.avg || 10,\n                  'mg'\n                )}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Debounce utility function\nfunction debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nexport default FilterPanel;\n","import React from 'react';\n\nconst ParameterDisplay = ({ extractedParams, accumulatedParams }) => {\n  // Always prioritize accumulated parameters as the authoritative source\n  const displayParams = accumulatedParams && Object.keys(accumulatedParams).length > 0 \n    ? accumulatedParams \n    : extractedParams?.extracted || {};\n\n  // Don't show if no parameters to display\n  if (!displayParams || Object.keys(displayParams).length === 0) return null;\n\n  // Determine display type based on data source\n  const isAccumulatedDisplay = accumulatedParams && Object.keys(accumulatedParams).length > 0;\n  const confidence = isAccumulatedDisplay ? 100 : Math.round((extractedParams?.extracted?.confidence_score || 0) * 100);\n\n  console.log('üéØ ParameterDisplay - Using accumulated params:', isAccumulatedDisplay, displayParams);\n\n  return (\n    <div className=\"parameter-extraction-display show\">\n      <div className=\"extraction-title\">\n        ü§ñ AI Detected Your Preferences\n        <span className={`confidence-score ${isAccumulatedDisplay ? 'accumulated' : ''}`}>\n          {isAccumulatedDisplay ? 'Session' : `${confidence}%`}\n        </span>\n      </div>\n      \n      <div className=\"extracted-params\">\n        {/* Brand - Highest priority with special styling */}\n        {displayParams.brand && (\n          <span className=\"param-tag brand\">\n            üè∑Ô∏è Brand: {displayParams.brand}\n          </span>\n        )}\n        \n        {/* Categories */}\n        {displayParams.categories && displayParams.categories.length > 0 && (\n          <span className=\"param-tag\">\n            üì¶ Categories: {Array.isArray(displayParams.categories) \n              ? displayParams.categories.join(', ') \n              : displayParams.categories}\n          </span>\n        )}\n        \n        {/* Effects */}\n        {displayParams.effects && displayParams.effects.length > 0 && (\n          <span className=\"param-tag\">\n            ‚ú® Effects: {Array.isArray(displayParams.effects) \n              ? displayParams.effects.join(', ') \n              : displayParams.effects}\n          </span>\n        )}\n        \n        {/* Flavor */}\n        {displayParams.flavor && displayParams.flavor.length > 0 && (\n          <span className=\"param-tag\">\n            üçÉ Flavor: {Array.isArray(displayParams.flavor) \n              ? displayParams.flavor.join(', ') \n              : displayParams.flavor}\n          </span>\n        )}\n        \n        {/* Activity */}\n        {displayParams.activity && displayParams.activity.length > 0 && (\n          <span className=\"param-tag\">\n            üéØ Activity: {Array.isArray(displayParams.activity) \n              ? displayParams.activity.join(', ') \n              : displayParams.activity}\n          </span>\n        )}\n        \n        {/* Mood */}\n        {displayParams.mood && displayParams.mood.length > 0 && (\n          <span className=\"param-tag\">\n            üòå Mood: {Array.isArray(displayParams.mood) \n              ? displayParams.mood.join(', ') \n              : displayParams.mood}\n          </span>\n        )}\n        \n        {/* Setting */}\n        {displayParams.setting && displayParams.setting.length > 0 && (\n          <span className=\"param-tag\">\n            üè† Setting: {Array.isArray(displayParams.setting) \n              ? displayParams.setting.join(', ') \n              : displayParams.setting}\n          </span>\n        )}\n        \n        {/* Experience */}\n        {displayParams.experience && displayParams.experience.length > 0 && (\n          <span className=\"param-tag\">\n            ‚ú® Experience: {Array.isArray(displayParams.experience) \n              ? displayParams.experience.join(', ') \n              : displayParams.experience}\n          </span>\n        )}\n        \n        {/* Price - Single value (new proximity system) */}\n        {displayParams.price && (\n          <span className=\"param-tag priority\">\n            üí∞ Price: around ${Math.round(displayParams.price)}\n          </span>\n        )}\n        \n        {/* Price range - Legacy support */}\n        {!displayParams.price && displayParams.price_range && Array.isArray(displayParams.price_range) && displayParams.price_range.length === 2 && (\n          <span className=\"param-tag priority\">\n            üí∞ Price: ${displayParams.price_range[0]}-$${displayParams.price_range[1]}\n          </span>\n        )}\n        \n        {/* THC - Single value (new proximity system) */}\n        {displayParams.thc && (\n          <span className=\"param-tag\">\n            üåø THC: around {Math.round(displayParams.thc * 10) / 10}%\n          </span>\n        )}\n        \n        {/* THC range - Legacy support */}\n        {!displayParams.thc && displayParams.thc_range && Array.isArray(displayParams.thc_range) && displayParams.thc_range.length === 2 && (\n          <span className=\"param-tag\">\n            üåø THC: {displayParams.thc_range[0]}-{displayParams.thc_range[1]}%\n          </span>\n        )}\n        \n        {/* CBD - Single value (new proximity system) */}\n        {displayParams.cbd && (\n          <span className=\"param-tag\">\n            üíö CBD: around {Math.round(displayParams.cbd * 10) / 10}mg\n          </span>\n        )}\n        \n        {/* CBD range - Legacy support */}\n        {!displayParams.cbd && displayParams.cbd_range && Array.isArray(displayParams.cbd_range) && displayParams.cbd_range.length === 2 && (\n          <span className=\"param-tag\">\n            üíö CBD: {displayParams.cbd_range[0]}-{displayParams.cbd_range[1]}mg\n          </span>\n        )}\n        \n        {/* Potency preference */}\n        {displayParams.potency_preference && (\n          <span className=\"param-tag\">\n            ‚ö° Potency: {displayParams.potency_preference}\n          </span>\n        )}\n        \n        {/* Time of use */}\n        {displayParams.time_of_use && (\n          <span className=\"param-tag\">\n            üïê Time: {displayParams.time_of_use}\n          </span>\n        )}\n        \n        {/* Social context */}\n        {displayParams.social_context && (\n          <span className=\"param-tag\">\n            üë• Context: {displayParams.social_context}\n          </span>\n        )}\n        \n        {/* Consumption method */}\n        {displayParams.consumption_method && (\n          <span className=\"param-tag\">\n            üí® Method: {displayParams.consumption_method}\n          </span>\n        )}\n        \n        {/* Experience level */}\n        {displayParams.experience_level && (\n          <span className=\"param-tag\">\n            üéì Level: {displayParams.experience_level}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ParameterDisplay;\n","import React, { useState } from 'react';\n\nconst DebugPanel = ({ \n  debugState, \n  filters, \n  extractedParams, \n  psychologyGuidance \n}) => {\n  const [activeTab, setActiveTab] = useState('state');\n\n  return (\n    <div className=\"debug-section\">\n      <div className=\"section-title\">üêõ Debug Information</div>\n      \n      {/* Debug Tabs */}\n      <div className=\"debug-tabs\">\n        <button \n          className={`debug-tab ${activeTab === 'state' ? 'active' : ''}`}\n          onClick={() => setActiveTab('state')}\n        >\n          State\n        </button>\n        <button \n          className={`debug-tab ${activeTab === 'filters' ? 'active' : ''}`}\n          onClick={() => setActiveTab('filters')}\n        >\n          Filters\n        </button>\n        <button \n          className={`debug-tab ${activeTab === 'parameters' ? 'active' : ''}`}\n          onClick={() => setActiveTab('parameters')}\n        >\n          Parameters\n        </button>\n        <button \n          className={`debug-tab ${activeTab === 'psychology' ? 'active' : ''}`}\n          onClick={() => setActiveTab('psychology')}\n        >\n          Psychology\n        </button>\n      </div>\n      \n      {/* Debug Content */}\n      <div className=\"debug-content\">\n        {activeTab === 'state' && (\n          <div className=\"debug-item\">\n            <h4>Widget State & Session</h4>\n            <pre>\n              {JSON.stringify({\n                products: debugState?.products || 0,\n                sessionId: debugState?.sessionId || null,\n                loading: debugState?.loading || false,\n                initializing: debugState?.initializing || false,\n                hasExtractedParams: debugState?.hasExtractedParams || false,\n                hasPsychologyGuidance: debugState?.hasPsychologyGuidance || false,\n                categoryStatsLoaded: debugState?.categoryStatsLoaded || false,\n                timestamp: new Date().toISOString()\n              }, null, 2)}\n            </pre>\n          </div>\n        )}\n        \n        {activeTab === 'filters' && (\n          <div className=\"debug-item\">\n            <h4>Current Filters</h4>\n            <pre>\n              {JSON.stringify(filters || {}, null, 2)}\n            </pre>\n          </div>\n        )}\n        \n        {activeTab === 'parameters' && (\n          <div className=\"debug-item\">\n            <h4>Extracted Parameters</h4>\n            <pre>\n              {JSON.stringify({\n                extracted: extractedParams?.extracted || null,\n                accumulated: extractedParams?.accumulated || debugState?.accumulatedParams || null,\n                confidence: extractedParams?.extracted?.confidence_score || null,\n                query_intent: extractedParams?.extracted?.query_intent || null,\n                search_strategy: extractedParams?.extracted?.search_strategy || null\n              }, null, 2)}\n            </pre>\n          </div>\n        )}\n        \n        {activeTab === 'psychology' && (\n          <div className=\"debug-item\">\n            <h4>Psychology Guidance</h4>\n            <pre>\n              {JSON.stringify({\n                psychology_guidance: psychologyGuidance?.psychology_guidance || null,\n                education_stage: psychologyGuidance?.education_stage || null,\n                trust_building_elements: psychologyGuidance?.trust_building_elements || null\n              }, null, 2)}\n            </pre>\n          </div>\n        )}\n      </div>\n      \n      {/* Quick Stats */}\n      <div className=\"debug-stats\">\n        <div className=\"debug-stat\">\n          <span className=\"stat-label\">Products:</span>\n          <span className=\"stat-value\">{debugState?.products || 0}</span>\n        </div>\n        <div className=\"debug-stat\">\n          <span className=\"stat-label\">Session:</span>\n          <span className=\"stat-value\">{debugState?.sessionId ? '‚úÖ' : '‚ùå'}</span>\n        </div>\n        <div className=\"debug-stat\">\n          <span className=\"stat-label\">Loading:</span>\n          <span className=\"stat-value\">{debugState?.loading ? 'üîÑ' : '‚úÖ'}</span>\n        </div>\n        <div className=\"debug-stat\">\n          <span className=\"stat-label\">Parameters:</span>\n          <span className=\"stat-value\">{debugState?.hasExtractedParams ? '‚úÖ' : '‚ùå'}</span>\n        </div>\n        <div className=\"debug-stat\">\n          <span className=\"stat-label\">Psychology:</span>\n          <span className=\"stat-value\">{debugState?.hasPsychologyGuidance ? '‚úÖ' : '‚ùå'}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DebugPanel;\n","import React from 'react';\n\nconst WidgetHeader = ({ \n  isMiniView, \n  showDebug, \n  onToggleMiniView, \n  onToggleDebug,\n  onResetSession \n}) => {\n  return (\n    <div className=\"widget-header\">\n      <div className=\"header-left\">\n        <div className=\"widget-title\">üåø Budtender</div>\n      </div>\n      \n      <div className=\"header-right\">\n        <button \n          className=\"reset-toggle\"\n          onClick={onResetSession}\n          title=\"Reset session and start fresh\"\n        >\n          üîÑ Reset\n        </button>\n        \n        <button \n          className=\"debug-toggle\"\n          onClick={onToggleDebug}\n          title=\"Toggle debug panel\"\n        >\n          üêõ Debug\n        </button>\n        \n        <button\n          className=\"toggle-btn\"\n          onClick={onToggleMiniView}\n          title={isMiniView ? 'Expand widget' : 'Minimize widget'}\n        >\n          {isMiniView ? '‚¨ÜÔ∏è' : '‚¨áÔ∏è'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default WidgetHeader;\n","/**\n * Magic Widget API Client - Isolated React Implementation\n * \n * This replaces the complex EnhancedCannabisAPIClient from vanilla JS\n * with a clean, modern implementation that works with the existing backend.\n */\nexport class MagicAPIClient {\n  constructor(config = {}) {\n    this.tenantId = config.tenantId || 'default';\n    this.apiKey = config.apiKey || 'default-api-key';\n    this.apiUrl = config.apiUrl || 'http://localhost:8000';\n    \n    // Validate configuration\n    if (!this.tenantId || !this.apiKey) {\n      console.warn('‚ö†Ô∏è MagicAPIClient: Missing tenantId or apiKey in config');\n    }\n    \n    console.log('üîß MagicAPIClient initialized:', {\n      tenantId: this.tenantId,\n      apiUrl: this.apiUrl,\n      hasApiKey: !!this.apiKey\n    });\n  }\n\n  /**\n   * Get default headers for API requests\n   */\n  getHeaders(additionalHeaders = {}) {\n    return {\n      'X-API-Key': this.apiKey,\n      'Content-Type': 'application/json',\n      ...additionalHeaders\n    };\n  }\n\n  /**\n   * Make API request with error handling\n   */\n  async makeRequest(url, options = {}) {\n    try {\n      const response = await fetch(url, {\n        ...options,\n        headers: this.getHeaders(options.headers || {})\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`API request failed: ${response.status} - ${errorText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('‚ùå API request failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a new chat session for the widget\n   */\n  async createSession() {\n    const url = `${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat`;\n    const payload = {\n      message: \"Initialize session\", // Minimal message to trigger session creation\n      experience_level: 'beginner'\n    };\n    \n    console.log('üÜî Creating new session...');\n    const result = await this.makeRequest(url, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n    \n    console.log('‚úÖ Session created:', result.session_id);\n    return result.session_id;\n  }\n\n  /**\n   * Get category statistics for filter configuration\n   */\n  async getCategoryStats() {\n    const url = `${this.apiUrl}/category-stats/${this.tenantId}/products/categories/stats`;\n    \n    console.log('üìä Fetching category stats...');\n    const result = await this.makeRequest(url);\n    console.log('‚úÖ Category stats loaded:', Object.keys(result.categories || {}).length, 'categories');\n    \n    return result;\n  }\n\n\n  /**\n   * Get product recommendations (for initial load)\n   */\n  async getRecommendations(query, profile, limit = 3) {\n    const url = `${this.apiUrl}/product/${this.tenantId}/products/recommend`;\n    const payload = { query, profile, limit };\n    \n    console.log('üéØ Fetching recommendations...');\n    const result = await this.makeRequest(url, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n    \n    console.log('‚úÖ Recommendations loaded:', result.results?.length || result.length || 0, 'products');\n    return result;\n  }\n\n  /**\n   * Update session parameters from UI filter changes\n   */\n  async updateSessionParameters(sessionId, filters, generateAIResponse = false) {\n    const url = new URL(`${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat/session/${sessionId}/parameters`);\n    \n    if (generateAIResponse) {\n      url.searchParams.append('generate_ai_response', 'true');\n    }\n    \n    console.log('ÔøΩ Updating session parameters:', {\n      sessionId,\n      filters,\n      generateAIResponse\n    });\n    \n    const result = await this.makeRequest(url.toString(), {\n      method: 'PUT',\n      body: JSON.stringify(filters)\n    });\n    \n    console.log('‚úÖ Session parameters updated:', result.updated_count, 'parameters');\n    return result;\n  }\n\n  /**\n   * Send chat message (non-streaming) - for fallback\n   */\n  async sendChatMessage(message, sessionId, currentFilters) {\n    const url = `${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat`;\n    const payload = {\n      message: message.trim(),\n      session_id: sessionId,\n      current_filters: currentFilters || {},\n      experience_level: 'beginner'\n    };\n    \n    console.log('üí¨ Sending chat message (non-streaming):', message);\n    const result = await this.makeRequest(url, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n    \n    console.log('‚úÖ Chat response received:', {\n      hasMessage: !!result.message,\n      products: result.products?.length || 0,\n      hasParameters: !!result.extracted_parameters\n    });\n    \n    return result;\n  }\n\n  /**\n   * Get chat history for a session\n   */\n  async getChatHistory(sessionId) {\n    const url = `${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat/${sessionId}/history`;\n    \n    console.log('üìú Fetching chat history for session:', sessionId);\n    const result = await this.makeRequest(url);\n    \n    console.log('‚úÖ Chat history loaded:', result.messages?.length || 0, 'messages');\n    return result;\n  }\n\n  /**\n   * Test API connectivity\n   */\n  async testConnection() {\n    try {\n      await this.getCategoryStats();\n      console.log('‚úÖ API connection test successful');\n      return true;\n    } catch (error) {\n      console.error('‚ùå API connection test failed:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get streaming URL for EventSource connections\n   */\n  getStreamingUrl() {\n    return `${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat/stream`;\n  }\n\n  /**\n   * Build streaming request payload\n   */\n  buildStreamingPayload(message, sessionId, currentFilters) {\n    return {\n      message: message.trim(),\n      session_id: sessionId,\n      current_filters: currentFilters || {},\n      experience_level: 'beginner'\n    };\n  }\n\n  /**\n   * Validate configuration\n   */\n  isConfigValid() {\n    const hasRequired = this.tenantId && this.apiKey && this.apiUrl;\n    \n    if (!hasRequired) {\n      console.error('‚ùå Invalid MagicAPIClient configuration:', {\n        hasTenantId: !!this.tenantId,\n        hasApiKey: !!this.apiKey,\n        hasApiUrl: !!this.apiUrl\n      });\n    }\n    \n    return hasRequired;\n  }\n\n  /**\n   * Get debug info for troubleshooting\n   */\n  getDebugInfo() {\n    return {\n      tenantId: this.tenantId,\n      apiUrl: this.apiUrl,\n      hasApiKey: !!this.apiKey,\n      isValid: this.isConfigValid(),\n      endpoints: {\n        categoryStats: `${this.apiUrl}/category-stats/${this.tenantId}/products/categories/stats`,\n        productSearch: `${this.apiUrl}/product/${this.tenantId}/products/parametric-search`,\n        recommendations: `${this.apiUrl}/product/${this.tenantId}/products/recommend`,\n        chat: `${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat`,\n        streaming: `${this.apiUrl}/chat-v2/tenant/${this.tenantId}/chat/stream`\n      }\n    };\n  }\n}\n\n// Default export for convenience\nexport default MagicAPIClient;\n","import { useState, useCallback, useMemo } from 'react';\nimport { MagicAPIClient } from '../services/MagicAPIClient';\n\nexport const useMagicWidget = (config = {}) => {\n  // Core state - replaces the complex CannabisWidgetStateManager\n  const [products, setProducts] = useState([]);\n  const [sessionId, setSessionId] = useState(null);\n  const [categoryStats, setCategoryStats] = useState({});\n  \n  // UI state - simple React state instead of manual DOM manipulation\n  const [isMiniView, setIsMiniView] = useState(true); // Start in mini view for auto-expand demo\n  const [showDebug, setShowDebug] = useState(false);\n  \n  // Filter state - eliminates race conditions from vanilla JS\n  const [filters, setFilters] = useState({\n    category: '',\n    effects: '',\n    price: null,\n    thc: null,\n    cbd: null\n  });\n  \n  // Loading states - replaces complex operation tracking\n  const [loading, setLoading] = useState(false);\n  const [initializing, setInitializing] = useState(true);\n  \n  // Parameter state - replaces manual parameter extraction handling\n  const [extractedParams, setExtractedParams] = useState(null);\n  const [psychologyGuidance, setPsychologyGuidance] = useState(null);\n  const [accumulatedParams, setAccumulatedParams] = useState({});\n\n  // API client instance\n  const apiClient = useMemo(() => new MagicAPIClient(config), [config]);\n\n  // Initialize widget - optimized with parallel loading\n  const initialize = useCallback(async () => {\n    try {\n      setInitializing(true);\n      \n      console.log('üöÄ Starting parallel initialization...');\n      const startTime = performance.now();\n      \n      // Run all three API calls in parallel for faster loading\n      const [newSessionId, stats, response] = await Promise.all([\n        apiClient.createSession(),\n        apiClient.getCategoryStats(),\n        apiClient.getRecommendations('', {}, 3)\n      ]);\n      \n      const loadTime = performance.now() - startTime;\n      \n      // Update state with parallel results\n      setSessionId(newSessionId);\n      setCategoryStats(stats.categories || {});\n      setProducts(response.results || response || []);\n      \n      console.log(`‚úÖ Magic Widget initialized successfully in ${loadTime.toFixed(0)}ms with session:`, newSessionId);\n    } catch (error) {\n      console.error('‚ùå Magic Widget initialization failed:', error);\n      setProducts([]);\n      setSessionId(null);\n    } finally {\n      setInitializing(false);\n    }\n  }, [apiClient]);\n\n  // Reset session and all state\n  const resetSession = useCallback(async () => {\n    console.log('üîÑ Resetting widget session...');\n    \n    try {\n      // Clear all state immediately for instant UI feedback\n      setSessionId(null);\n      setProducts([]);\n      setFilters({\n        category: '',\n        effects: '',\n        price: null,\n        thc: null,\n        cbd: null\n      });\n      setExtractedParams(null);\n      setPsychologyGuidance(null);\n      setAccumulatedParams({});\n      \n      // Reinitialize with fresh session\n      await initialize();\n      \n      console.log('‚úÖ Widget session reset successfully');\n    } catch (error) {\n      console.error('‚ùå Failed to reset session:', error);\n    }\n  }, [initialize]);\n\n  // Legacy updateProducts function removed - now handled by parameter endpoint\n\n  // Calculate filter ranges using midpoint ¬±20% logic\n  const calculateRange = useCallback((midpoint, percentage = 20) => {\n    if (!midpoint || midpoint <= 0) return null;\n    \n    const delta = (midpoint * percentage) / 100;\n    return {\n      min: Math.max(0, midpoint - delta),\n      max: midpoint + delta,\n      midpoint: midpoint,\n      display: `${Math.round(midpoint - delta)}-${Math.round(midpoint + delta)}`\n    };\n  }, []);\n\n  // Convert filters to search criteria - uses single values for proximity scoring\n  const filtersToSearchCriteria = useCallback((currentFilters) => {\n    const criteria = {};\n    \n    // Category - use canonical field name\n    if (currentFilters.category) {\n      criteria.categories = [currentFilters.category];\n    }\n    \n    // Effects - use canonical field name\n    if (currentFilters.effects) {\n      criteria.effects = [currentFilters.effects];\n    }\n    \n    // Single price value (proximity-based scoring)\n    if (currentFilters.price) {\n      criteria.price = currentFilters.price;\n    }\n    \n    // Single THC value (proximity-based scoring)\n    if (currentFilters.thc) {\n      criteria.thc = currentFilters.thc;\n    }\n    \n    // Single CBD value (proximity-based scoring)\n    if (currentFilters.cbd) {\n      criteria.cbd = currentFilters.cbd;\n    }\n    \n    return criteria;\n  }, []);\n\n  // Debug state for development - replaces complex debug tracking\n  const debugState = useMemo(() => ({\n    products: products.length,\n    sessionId,\n    filters,\n    accumulatedParams,\n    loading,\n    initializing,\n    hasExtractedParams: !!extractedParams,\n    hasPsychologyGuidance: !!psychologyGuidance,\n    categoryStatsLoaded: Object.keys(categoryStats).length > 0\n  }), [\n    products.length,\n    sessionId,\n    filters,\n    accumulatedParams,\n    loading,\n    initializing,\n    extractedParams,\n    psychologyGuidance,\n    categoryStats\n  ]);\n\n  return {\n    // Core data\n    products,\n    setProducts,\n    sessionId,\n    setSessionId,\n    categoryStats,\n    \n    // UI state\n    isMiniView,\n    setIsMiniView,\n    showDebug,\n    setShowDebug,\n    \n    // Filter state\n    filters,\n    setFilters,\n    filtersToSearchCriteria,\n    \n    // Loading states\n    loading,\n    setLoading,\n    initializing,\n    \n    // Parameter state\n    extractedParams,\n    setExtractedParams,\n    psychologyGuidance,\n    setPsychologyGuidance,\n    accumulatedParams,\n    setAccumulatedParams,\n    \n    // Actions\n    initialize,\n    resetSession,\n    calculateRange,\n    \n    // API client\n    apiClient,\n    \n    // Debug\n    debugState\n  };\n};\n","import { useState, useCallback, useRef } from 'react';\nimport { MagicAPIClient } from '../services/MagicAPIClient';\n\nexport const useStreamingChat = ({\n  config,\n  sessionId,\n  setSessionId,\n  currentFilters,\n  onMessage,\n  onProducts,\n  onParametersExtracted,\n  onPsychologyGuidance,\n  onFiltersUpdated\n}) => {\n  const [streaming, setStreaming] = useState(false);\n  const [progress, setProgress] = useState(null);\n  \n  // Keep track of the active stream to allow cancellation\n  const activeStreamRef = useRef(null);\n  \n  // API client\n  const apiClient = new MagicAPIClient(config);\n\n  const sendStreamingMessage = useCallback(async (message) => {\n    // Prevent multiple concurrent streams\n    if (streaming) {\n      console.warn('üö´ Stream already in progress, ignoring new message');\n      return;\n    }\n\n    setStreaming(true);\n    setProgress({ icon: 'ü§ñ', message: 'Understanding your request...', typing: false });\n    \n    try {\n      console.log('üåä Starting streaming chat for message:', message);\n      \n      // Build request payload\n      const payload = {\n        message: message.trim(),\n        session_id: sessionId,\n        current_filters: currentFilters || {},\n        experience_level: 'beginner'\n      };\n\n      // Get the streaming URL\n      const streamUrl = `${apiClient.apiUrl}/chat-v2/tenant/${apiClient.tenantId}/chat/stream`;\n      \n      // Start EventSource for streaming\n      const response = await fetch(streamUrl, {\n        method: 'POST',\n        headers: {\n          'X-API-Key': apiClient.apiKey,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Streaming failed: ${response.status} - ${errorText}`);\n      }\n\n      // Process streaming response\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      activeStreamRef.current = { reader };\n\n      let streamedData = {\n        message: '',\n        session_id: sessionId,\n        products: [],\n        psychology_guidance: {},\n        extracted_parameters: {},\n        education_stage: 'awareness',\n        trust_building_elements: [],\n        updated_filters: {},\n        accumulated_parameters: {}\n      };\n\n      try {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          const chunk = decoder.decode(value);\n          const lines = chunk.split('\\n');\n\n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              const data = line.slice(6);\n              if (data === '[DONE]') break;\n\n              try {\n                const parsed = JSON.parse(data);\n                \n                // Handle different types of streaming data\n                switch (parsed.type) {\n                  case 'progress':\n                    setProgress({\n                      icon: parsed.icon,\n                      message: parsed.message,\n                      typing: parsed.typing || false\n                    });\n                    console.log(`üì° Stream progress: ${parsed.icon} ${parsed.message}`);\n                    break;\n\n                  case 'session_id':\n                    streamedData.session_id = parsed.session_id;\n                    if (setSessionId) {\n                      setSessionId(parsed.session_id);\n                    }\n                    console.log(`üÜî Session ID: ${parsed.session_id}`);\n                    break;\n\n                  case 'message_chunk':\n                    streamedData.message += parsed.content;\n                    break;\n\n                  case 'products':\n                    streamedData.products = parsed.products;\n                    console.log(`üì¶ Products: ${parsed.products.length} items`);\n                    break;\n\n                  case 'psychology_guidance':\n                    streamedData.psychology_guidance = parsed.psychology_guidance;\n                    streamedData.education_stage = parsed.education_stage;\n                    streamedData.trust_building_elements = parsed.trust_building_elements;\n                    console.log(`üß† Psychology guidance: ${parsed.education_stage} stage`);\n                    break;\n\n                  case 'extracted_parameters':\n                    streamedData.extracted_parameters = parsed.extracted_parameters;\n                    console.log(`ü§ñ Parameters extracted: ${Object.keys(parsed.extracted_parameters).length} params`);\n                    break;\n\n                  case 'filter_updates':\n                    streamedData.updated_filters = parsed.filters;\n                    console.log(`üéõÔ∏è Filter updates: ${Object.keys(parsed.filters).length} filters`);\n                    break;\n\n                  case 'accumulated_parameters':\n                    streamedData.accumulated_parameters = parsed.accumulated_parameters;\n                    console.log(`üíæ Accumulated parameters: ${Object.keys(parsed.accumulated_parameters).length} params`);\n                    break;\n\n                  case 'error':\n                    console.error('‚ùå Streaming error:', parsed.message);\n                    throw new Error(parsed.message);\n\n                  default:\n                    console.log('üì° Unknown stream type:', parsed.type);\n                }\n              } catch (parseError) {\n                // Skip invalid JSON chunks\n                console.debug('Skipping invalid JSON chunk:', data);\n              }\n            }\n          }\n        }\n      } finally {\n        reader.releaseLock();\n        activeStreamRef.current = null;\n      }\n\n      // Process complete streaming response\n      console.log('‚úÖ Streaming complete, processing results...');\n      \n      // Clear progress\n      setProgress(null);\n      \n      // Call callbacks with streamed data\n      if (streamedData.message && onMessage) {\n        onMessage(streamedData.message);\n      }\n      \n      if (streamedData.products && streamedData.products.length > 0 && onProducts) {\n        onProducts(streamedData.products);\n      }\n      \n      if (streamedData.extracted_parameters && Object.keys(streamedData.extracted_parameters).length > 0 && onParametersExtracted) {\n        onParametersExtracted({\n          extracted: streamedData.extracted_parameters,\n          accumulated: streamedData.accumulated_parameters\n        });\n      }\n      \n      if (streamedData.psychology_guidance && Object.keys(streamedData.psychology_guidance).length > 0 && onPsychologyGuidance) {\n        onPsychologyGuidance({\n          psychology_guidance: streamedData.psychology_guidance,\n          education_stage: streamedData.education_stage,\n          trust_building_elements: streamedData.trust_building_elements\n        });\n      }\n      \n      if (streamedData.updated_filters && Object.keys(streamedData.updated_filters).length > 0 && onFiltersUpdated) {\n        onFiltersUpdated(streamedData.updated_filters);\n      }\n      \n      console.log('‚úÖ Streaming chat completed successfully');\n      \n    } catch (error) {\n      console.error('‚ùå Streaming chat error:', error);\n      setProgress(null);\n      \n      // Show error message to user\n      if (onMessage) {\n        onMessage('Sorry, I encountered an error. Please try again.');\n      }\n    } finally {\n      setStreaming(false);\n      activeStreamRef.current = null;\n    }\n  }, [\n    streaming,\n    sessionId,\n    setSessionId,\n    currentFilters,\n    onMessage,\n    onProducts,\n    onParametersExtracted,\n    onPsychologyGuidance,\n    onFiltersUpdated,\n    apiClient,\n    config\n  ]);\n\n  // Cancel active stream\n  const cancelStream = useCallback(() => {\n    if (activeStreamRef.current?.reader) {\n      activeStreamRef.current.reader.cancel();\n      activeStreamRef.current = null;\n      setStreaming(false);\n      setProgress(null);\n      console.log('üö´ Stream cancelled');\n    }\n  }, []);\n\n  return {\n    sendStreamingMessage,\n    streaming,\n    progress,\n    setProgress,\n    cancelStream\n  };\n};\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport ProductGrid from './components/ProductGrid';\nimport ChatInterface from './components/ChatInterface';\nimport FilterPanel from './components/FilterPanel';\nimport ParameterDisplay from './components/ParameterDisplay';\nimport DebugPanel from './components/DebugPanel';\nimport WidgetHeader from './components/WidgetHeader';\nimport { useMagicWidget } from './hooks/useMagicWidget';\nimport { useStreamingChat } from './hooks/useStreamingChat';\nimport { MagicAPIClient } from './services/MagicAPIClient';\nimport './styles/MagicWidget.css';\n\nconst MagicWidget = ({ config = {} }) => {\n  // Core state management\n  const {\n    // Products and session\n    products,\n    setProducts,\n    sessionId,\n    setSessionId,\n    \n    // UI state\n    isMiniView,\n    setIsMiniView,\n    showDebug,\n    setShowDebug,\n    \n    // Filter state\n    filters,\n    setFilters,\n    categoryStats,\n    filtersToSearchCriteria,\n    \n    // Loading states\n    loading,\n    setLoading,\n    \n    // Parameter state\n    extractedParams,\n    setExtractedParams,\n    accumulatedParams,\n    setAccumulatedParams,\n    \n    // Initialization\n    initialize,\n    resetSession,\n    \n    // API client\n    apiClient,\n    \n    // Debug state\n    debugState\n  } = useMagicWidget(config);\n\n  // Chat state\n  const [messages, setMessages] = useState([\n    {\n      id: 1,\n      role: 'assistant',\n      content: \"Hi! I'm your budtender. Tell me what you're looking for or ask me anything!\",\n      timestamp: new Date()\n    }\n  ]);\n\n  // Helper function to detect if parameters affect products (must be defined before use)\n  const hasProductAffectingParameters = useCallback((params) => {\n    if (!params?.extracted) return false;\n    \n    const extracted = params.extracted;\n    \n    // Check for any parameter that would change product search results\n    return !!(\n      extracted.categories?.length > 0 ||\n      extracted.effects?.length > 0 ||\n      extracted.price_range?.length === 2 ||\n      extracted.thc_range?.length === 2 ||\n      extracted.cbd_range?.length === 2 ||\n      extracted.brand ||\n      extracted.potency_preference ||\n      extracted.requires_products === true\n    );\n  }, []);\n\n  // Backend-to-React filter conversion using canonical field names\n  const convertBackendToReactFilters = useCallback((backendFilters) => {\n    const converted = {};\n    \n    // Convert category format: categories: [\"flower\"] ‚Üí category: \"Flower\"\n    if (backendFilters.categories?.length > 0) {\n      const category = backendFilters.categories[0];\n      // Capitalize first letter to match FilterPanel options\n      converted.category = category.charAt(0).toUpperCase() + category.slice(1);\n    }\n    \n    // Convert effects format: effects: [\"relaxing\"] ‚Üí effects: \"relaxing\"\n    if (backendFilters.effects?.length > 0) {\n      converted.effects = backendFilters.effects[0];\n    }\n    \n    // Direct value mapping for single values\n    if (backendFilters.price) {\n      converted.price = backendFilters.price;\n    }\n    \n    if (backendFilters.thc) {\n      converted.thc = backendFilters.thc;\n    }\n    \n    if (backendFilters.cbd) {\n      converted.cbd = backendFilters.cbd;\n    }\n    \n    return converted;\n  }, []);\n\n  // Streaming chat hook\n  const {\n    sendStreamingMessage,\n    streaming,\n    progress,\n    setProgress\n  } = useStreamingChat({\n    config,\n    sessionId,\n    setSessionId,\n    currentFilters: filters,\n    onMessage: useCallback((message) => {\n      setMessages(prev => [...prev, {\n        id: Date.now(),\n        role: 'assistant',\n        content: message,\n        timestamp: new Date()\n      }]);\n    }, []),\n    onProducts: useCallback((newProducts) => {\n      // Update products from streaming response\n      // This eliminates race conditions from vanilla JS\n      if (newProducts && newProducts.length > 0) {\n        console.log('üîÑ Products updated from streaming chat:', newProducts.length);\n        setProducts(newProducts);\n      }\n    }, [setProducts]),\n    onParametersExtracted: useCallback((params) => {\n      setExtractedParams(params);\n      \n      // Update accumulated parameters state\n      if (params.accumulated) {\n        setAccumulatedParams(params.accumulated);\n        console.log('üíæ Updated accumulated parameters:', params.accumulated);\n      }\n      \n      // Show ALL filters if AI extracted any product-affecting parameters\n      if (hasProductAffectingParameters(params) && isMiniView) {\n        console.log('üéõÔ∏è Revealing filters - AI extracted product parameters:', params.extracted);\n        setIsMiniView(false);\n      }\n    }, [setExtractedParams, setAccumulatedParams, hasProductAffectingParameters, isMiniView, setIsMiniView]),\n    onFiltersUpdated: useCallback((backendFilters) => {\n      // Elegant React sync: Convert backend format and update state\n      // React automatically re-renders FilterPanel with new values!\n      const reactFilters = convertBackendToReactFilters(backendFilters);\n      console.log('üéõÔ∏è Converting backend filters to React format:', backendFilters, '‚Üí', reactFilters);\n      setFilters(prev => ({ ...prev, ...reactFilters }));\n    }, [setFilters, convertBackendToReactFilters])\n  });\n\n  // Initialize widget on mount\n  useEffect(() => {\n    initialize();\n  }, [initialize]);\n\n  // Handle chat message send\n  const handleSendMessage = useCallback(async (message) => {\n    // Add user message immediately\n    const userMessage = {\n      id: Date.now(),\n      role: 'user', \n      content: message,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    \n    // Send streaming request\n    await sendStreamingMessage(message);\n  }, [sendStreamingMessage]);\n\n  // Handle filter changes from UI (single API call approach)\n  const handleFilterChange = useCallback(async (newFilters, shouldSearch = true) => {\n    // 1. Update React state immediately (instant UI feedback)\n    const updatedFilters = { ...filters, ...newFilters };\n    setFilters(updatedFilters);\n    \n    if (shouldSearch && !streaming && sessionId) {\n      setLoading(true);\n      try {\n        // 2. Check if this is a significant filter change that warrants AI explanation\n        const isSignificantChange = \n          (newFilters.category && newFilters.category !== filters.category) ||\n          (newFilters.effects && newFilters.effects !== filters.effects) ||\n          (newFilters.price && Math.abs((newFilters.price || 0) - (filters.price || 0)) > 20) ||\n          (newFilters.thc !== undefined && Math.abs((newFilters.thc || 0) - (filters.thc || 0)) > 5) ||\n          (newFilters.cbd !== undefined && Math.abs((newFilters.cbd || 0) - (filters.cbd || 0)) > 5);\n        \n        if (isSignificantChange) {\n          console.log('üí¨ Significant filter change detected - using parameter endpoint with AI response');\n          \n          // Show typing indicator using same system as chat (consistent styling)\n          setProgress({ \n            icon: '‚úèÔ∏è', \n            message: 'Typing', \n            typing: true \n          });\n        }\n        \n        // 3. SINGLE API call to parameter endpoint (handles both products AND session update)\n        const sessionResponse = await apiClient.updateSessionParameters(\n          sessionId, \n          updatedFilters, \n          isSignificantChange // generate_ai_response=true only for significant changes\n        );\n        \n        // Clear typing indicator \n        setProgress(null);\n        \n        // 4. Update products from parameter endpoint response\n        if (sessionResponse.products) {\n          setProducts(sessionResponse.products);\n          console.log('‚úÖ Products updated from parameter endpoint:', sessionResponse.products.length);\n        }\n        \n        // 5. Add AI response to chat if generated\n        if (sessionResponse.ai_response) {\n          const aiMessage = {\n            id: Date.now(),\n            role: 'assistant',\n            content: sessionResponse.ai_response,\n            timestamp: new Date(),\n            isFilterResponse: true // Mark as filter-generated response\n          };\n          \n          setMessages(prev => [...prev, aiMessage]);\n          console.log('ü§ñ Added AI filter change explanation to chat');\n        }\n        \n        // 6. Update accumulated parameters state from backend response\n        if (sessionResponse.accumulated_parameters) {\n          setAccumulatedParams(sessionResponse.accumulated_parameters);\n          console.log('üíæ Updated accumulated parameters from UI filter change:', sessionResponse.accumulated_parameters);\n        }\n        \n      } catch (error) {\n        // Clear typing indicator on error\n        setProgress(null);\n        console.error('‚ùå Failed to update filters and products:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  }, [filters, setFilters, streaming, sessionId, setLoading, apiClient, setProducts, setMessages, setProgress, setAccumulatedParams]);\n\n  // Handle mini view toggle\n  const handleToggleMiniView = useCallback(() => {\n    setIsMiniView(prev => !prev);\n  }, [setIsMiniView]);\n\n  // Handle debug toggle\n  const handleToggleDebug = useCallback(() => {\n    setShowDebug(prev => !prev);\n  }, [setShowDebug]);\n\n  // Handle session reset\n  const handleResetSession = useCallback(async () => {\n    console.log('üîÑ Resetting widget session and chat...');\n    \n    // Clear messages immediately for instant UI feedback\n    setMessages([\n      {\n        id: 1,\n        role: 'assistant',\n        content: \"Hi! I'm your budtender. Tell me what you're looking for or ask me anything!\",\n        timestamp: new Date()\n      }\n    ]);\n    \n    // Reset session and all state\n    await resetSession();\n  }, [resetSession]);\n\n  // Adjust page layout on mount and mini view changes\n  useEffect(() => {\n    const adjustPageLayout = () => {\n      const widget = document.querySelector('.magic-widget');\n      if (widget) {\n        document.body.style.paddingTop = `${widget.offsetHeight + 10}px`;\n      }\n    };\n    \n    adjustPageLayout();\n    window.addEventListener('resize', adjustPageLayout);\n    \n    return () => {\n      window.removeEventListener('resize', adjustPageLayout);\n      document.body.style.paddingTop = '';\n    };\n  }, [isMiniView]);\n\n  // Click handler for mini view expansion\n  const handleWidgetClick = useCallback((event) => {\n    if (!isMiniView) return;\n    \n    // Don't expand if clicking on interactive elements\n    if (event.target.closest('.widget-header, .minimize-button')) {\n      return;\n    }\n    \n    event.stopPropagation();\n    event.preventDefault();\n    handleToggleMiniView();\n  }, [isMiniView, handleToggleMiniView]);\n\n  return (\n    <div \n      className={`magic-widget ${isMiniView ? 'mini-view' : ''}`}\n      onClick={handleWidgetClick}\n    >\n      <WidgetHeader\n        isMiniView={isMiniView}\n        showDebug={showDebug}\n        onToggleMiniView={handleToggleMiniView}\n        onToggleDebug={handleToggleDebug}\n        onResetSession={handleResetSession}\n      />\n\n      <div className={`widget-content ${showDebug ? 'debug-active' : ''}`}>\n        {/* Main Content Area */}\n        <div className=\"main-content-area\">\n          {/* Products Section - Always visible */}\n          <ProductGrid\n            products={products}\n            loading={loading || streaming}\n            isMiniView={isMiniView}\n          />\n\n          {/* Expandable Sections - Hidden in mini view */}\n          <div className={`expandable-sections ${isMiniView ? 'collapsed' : 'expanded'}`}>\n            {/* Info Displays */}\n            <div className=\"info-displays\">\n              {extractedParams && (\n                <ParameterDisplay\n                  extractedParams={extractedParams}\n                  accumulatedParams={accumulatedParams}\n                />\n              )}\n              \n            </div>\n\n            {/* Filter Panel */}\n            <FilterPanel\n              filters={filters}\n              categoryStats={categoryStats}\n              loading={loading || streaming}\n              onFilterChange={handleFilterChange}\n            />\n\n            {/* Chat Interface */}\n            <ChatInterface\n              messages={messages}\n              onSendMessage={handleSendMessage}\n              streaming={streaming}\n              progress={progress}\n              disabled={loading}\n            />\n          </div>\n        </div>\n\n        {/* Debug Sidebar - Right side when active */}\n        {showDebug && (\n          <div className=\"debug-sidebar\">\n            <DebugPanel\n              debugState={debugState}\n              filters={filters}\n              extractedParams={extractedParams}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MagicWidget;\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport MagicWidget from './magic-widget/MagicWidget';\n\n/**\n * Automatically detect the appropriate API URL based on environment\n * @returns {string} The API URL to use\n */\nfunction getAutoApiUrl() {\n  const hostname = window.location.hostname;\n  \n  if (hostname === 'localhost' || hostname === '127.0.0.1' || hostname.startsWith('192.168.')) {\n    return 'http://localhost:8000';  // Local development\n  } else {\n    return 'https://budtender.cannafax.com';  // Production (GitHub Pages/Azure)\n  }\n}\n\n// Default configuration - can be overridden when initializing\nconst DEFAULT_CONFIG = {\n  tenantId: '5388610a-535a-4d3f-92e5-9ae6527f9283',\n  apiKey: 'aa7cfcf7b7403d6fb3513b1d3dda2825',\n  apiUrl: getAutoApiUrl()  // Automatically detect environment\n};\n\n/**\n * Initialize Magic Widget on a page (UMD version)\n * @param {HTMLElement} container - DOM element to render the widget in\n * @param {Object} config - Configuration object\n * @returns {Object} Widget instance with cleanup method\n */\nexport function initMagicWidget(container, config = {}) {\n  const finalConfig = { ...DEFAULT_CONFIG, ...config };\n  \n  console.log('üöÄ Initializing Magic Widget with config:', finalConfig);\n  console.log('üåê Auto-detected API URL:', finalConfig.apiUrl);\n  \n  // Create React root and render using React.createElement instead of JSX\n  const root = createRoot(container);\n  root.render(React.createElement(MagicWidget, { config: finalConfig }));\n  \n  // Return widget instance with cleanup\n  return {\n    config: finalConfig,\n    cleanup: () => {\n      root.unmount();\n      console.log('üßπ Magic Widget cleaned up');\n    }\n  };\n}\n\n/**\n * Auto-initialize widget if container exists on page load\n */\nfunction autoInit() {\n  // Look for magic-widget-container div\n  const container = document.getElementById('magic-widget-container');\n  if (container) {\n    // Get config from data attributes with automatic API URL detection\n    const config = {\n      tenantId: container.dataset.tenantId || DEFAULT_CONFIG.tenantId,\n      apiKey: container.dataset.apiKey || DEFAULT_CONFIG.apiKey,\n      apiUrl: container.dataset.apiUrl || getAutoApiUrl()  // Auto-detect if not specified\n    };\n    \n    console.log('üîç Auto-initializing Magic Widget');\n    console.log('üåê Environment detected:', window.location.hostname);\n    console.log('üîå Using API URL:', config.apiUrl);\n    \n    return initMagicWidget(container, config);\n  }\n  \n  console.log('‚ÑπÔ∏è No magic-widget-container found for auto-init');\n  return null;\n}\n\n// Auto-initialize on DOM ready\nif (typeof document !== 'undefined') {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', autoInit);\n  } else {\n    autoInit();\n  }\n}\n\n// Export for global access (UMD build)\nif (typeof window !== 'undefined') {\n  window.MagicWidget = {\n    init: initMagicWidget,\n    autoInit\n  };\n}\n\n// Export for module usage\nexport default MagicWidget;\nexport { MagicWidget };\n"],"names":["m","require$$0","jsxRuntimeModule","jsx","jsxs","Fragment","useState","useRef","useEffect","useCallback","useMemo","React"],"mappings":"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","x_google_ignoreList":[0,1,2]}